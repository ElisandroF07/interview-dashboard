(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{4292:function(e,r,t){Promise.resolve().then(t.bind(t,5242))},5242:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return P}});var o,s,a=t(7437);let c=t(8472).Z;c.defaults.baseURL="https://interview.t-alpha.com.br/api",c.defaults.headers.head["Content-Type"]="application/json";var n=t(5355),d=t(998),i=t(2265);function l(){var e;let{data:r}=(0,d.useSession)(),[t,o]=(0,i.useState)(1),[s,a]=(0,i.useState)(!1);c.defaults.headers.common.Authorization="Bearer ".concat(null==r?void 0:null===(e=r.user)||void 0===e?void 0:e.name);let l=async()=>(await c.get("/products/get-all-products")).data,{data:u}=(0,n.a)({queryFn:l,queryKey:["get-all-products"]});return{viewMode:t,setViewMode:o,data:u,isLoading:s}}(o=s||(s={}))[o.list=1]="list",o[o.cards=2]="cards";var u=t(9772);let m=u.z.object({name:u.z.string().min(3),description:u.z.string().min(1),price:u.z.string().min(1),stock:u.z.string().min(1)});var p=t(1014),x=t(9343),h=t(7776);function b(){let[e,r]=(0,i.useState)(!1),[t,o]=(0,i.useState)(!1),[s,a]=(0,i.useState)(!1),[n,d]=(0,i.useState)({name:"",description:"",price:0,stock:0,id:0}),{register:l,handleSubmit:u,formState:{errors:b}}=(0,x.cI)({resolver:(0,p.F)(m)});return{registerProduct:l,handleSubmitProduct:u,deleteProduct:async e=>{r(!0);try{c.delete("/products/delete-product/".concat(e)),h.Am.success("Produto eliminado com sucesso!")}catch(e){console.log("Erro ao deletar o produto: ".concat(e))}finally{r(!1)}},updateProduct:async function(e,t){r(!0);try{await c.patch("/products/update-product/".concat(e),{name:t.name,description:t.description,price:parseInt(t.price.toString()),stock:parseInt(t.stock.toString())}),h.Am.success("Producto atualizado com sucesso!"),a(!1)}catch(e){console.log("Erro ao atualizar produto: ".concat(e)),h.Am.error("Ocorreu um erro ao processar a sua solicita\xe7\xe3o!")}finally{r(!1)}},errorsProduct:b,createProduct:async function(e){r(!0);try{await c.post("/products/create-product",{name:e.name,description:e.description,price:parseInt(e.price),stock:parseInt(e.stock)}),h.Am.success("Producto criado com sucesso!"),o(!1)}catch(e){console.log("Erro ao cadastrar produto: ".concat(e)),h.Am.success("Ocorreu um erro ao processar a sua solicita\xe7\xe3o!")}finally{r(!1)}},isLoading:e,selectedProduct:n,setSelectedProduct:d,setIsModalOpened:o,isModalOpened:t,setUpdateModalOpened:a,updateModalOpened:s}}var f=t(8422),g=t(399);function v(e){let{setUpdateModalOpened:r,setSelectedProduct:t}=e,{data:o}=l(),{deleteProduct:s}=b();async function n(e){try{let o=await c.get("/products/get-one-product/".concat(e)),s=o.data.data.product;o.data.success?(console.log(s),t({name:s.name,description:s.description,price:s.price,stock:s.stock,id:s.id}),r(!0)):h.Am.error("Erro ao obter dados do produto!")}catch(r){console.log("Erro ao obter dados do produto ".concat(e,": ").concat(r))}}return(0,a.jsx)("div",{className:"w-full mt-6 flex flex-wrap overflow-y-scroll gap-x-12 gap-y-12",style:{height:"calc(100vh - 226px)"},children:null==o?void 0:o.data.products.map(e=>(0,a.jsxs)("div",{className:"w-[250px] h-[200px] bg-[rgb(var(--background))] rounded-[20px] shadow-sm p-3",children:[(0,a.jsx)("h1",{className:"text-[1.5rem] font-mediun",children:e.name}),(0,a.jsx)("p",{children:e.description}),(0,a.jsx)("div",{className:"w-full h-[1px] bg-[var(--primary)] opacity-5 mt-3"}),(0,a.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,a.jsx)("p",{children:e.price.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsx)("div",{onClick:()=>n(e.id),className:"viewModeSelector bg-[rgb(var(--background))] p-2 w-max h-[35px] rounded-[10px] border-solid border-[1px] transition-color duration-300 cursor-pointer",children:(0,a.jsx)(f.Z,{size:15,strokeWidth:1.2})}),(0,a.jsx)("button",{onClick:()=>s(e.id),className:"viewModeSelector bg-red-100 text-red-600 border-red-400 p-2 w-max h-max rounded-[10px] border-solid border-[1px] transition-color duration-300 cursor-pointer",children:(0,a.jsx)(g.Z,{size:15,strokeWidth:1.2})})]})]}),(0,a.jsx)("small",{children:e.stock>1?(0,a.jsxs)(a.Fragment,{children:[e.stock," Itens em stock"]}):1===e.stock?(0,a.jsxs)(a.Fragment,{children:[e.stock," Item em stock"]}):(0,a.jsx)(a.Fragment,{children:"Sem itens em stock"})})]},e.id))})}var j=t(8844),k=t(1189),w=t(3948);function y(e){let{opened:r,closeModal:t}=e,{createProduct:o,errorsProduct:s,handleSubmitProduct:c,registerProduct:n,isLoading:d}=b(),l=(0,i.useRef)(null),u=e=>{l.current&&!l.current.contains(e.target)&&t(!1)};return(0,i.useEffect)(()=>(r?document.addEventListener("mousedown",u):document.removeEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}),[r]),(0,a.jsxs)("div",{ref:l,"data-opened":r,className:"modal w-[350px] h-full gap-4 absolute top-0 right-[-350px] bg-[rgb(var(--background))] transition-all duration-300 z-10 border-l-[1px] border-l-solid",children:[(0,a.jsx)("div",{className:"flex px-4 mt-4",children:(0,a.jsxs)("h1",{className:"text-[#333] text-[1.3rem] font-semibold flex gap-2 items-center justify-center",children:["Adicionar produto ",(0,a.jsx)(j.Z,{size:25,strokeWidth:1.9})]})}),(0,a.jsxs)("form",{onSubmit:c(o),className:"px-4 mt-8 flex flex-col gap-3 w-full",children:[(0,a.jsx)(w.Z,{haveError:!!s.name,...n("name"),label:"Nome",id:"name",placeholder:"Tv 32' FHD+"}),(0,a.jsx)(w.Z,{haveError:!!s.description,...n("description"),label:"Descri\xe7\xe3o",id:"description",placeholder:"Observe o mundo de outro \xe2ngulo"}),(0,a.jsx)(w.Z,{haveError:!!s.price,...n("price"),label:"Pre\xe7o",id:"price",type:"number",placeholder:"R$ 2.900,00"}),(0,a.jsx)(w.Z,{haveError:!!s.stock,...n("stock"),label:"Stock",id:"stock",type:"number",placeholder:"24"}),(0,a.jsx)(k.Z,{isLoading:d,children:"Adicionar"})]})]})}function N(e){let{setUpdateModalOpened:r,setSelectedProduct:t}=e,{data:o}=l(),{deleteProduct:s}=b();async function n(e){try{let o=await c.get("/products/get-one-product/".concat(e)),s=o.data.data.product;o.data.success?(console.log(s),t({name:s.name,description:s.description,price:s.price,stock:s.stock,id:s.id}),r(!0)):h.Am.error("Erro ao obter dados do produto!")}catch(r){console.log("Erro ao obter dados do produto ".concat(e,": ").concat(r))}}return(0,a.jsx)("div",{className:"w-full mt-6 flex flex-col overflow-y-scroll gap-3",style:{height:"calc(100vh - 226px)"},children:null==o?void 0:o.data.products.map(e=>(0,a.jsxs)("div",{className:"w-full h-[60px] bg-[rgb(var(--background))] rounded-[8px] border-[1px] border-solid p-3 flex items-center justify-start",children:[(0,a.jsxs)("div",{className:"flex w-full",children:[(0,a.jsxs)("div",{className:"w-max sm:w-[30%]",children:[(0,a.jsx)("h1",{className:"text-[0.8rem] font-semibold",children:e.name}),(0,a.jsx)("p",{className:"",children:e.description})]}),(0,a.jsxs)("div",{className:"flex items center w-[100px] justify-center flex-col text-[0.8rem]",children:[(0,a.jsx)("p",{className:"text-[0.75rem]",children:"Pre\xe7o"}),(0,a.jsx)("p",{children:e.price.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]}),(0,a.jsx)("small",{className:"h-max mt-3 ml-24 text-[0.8rem]",children:e.stock>1?(0,a.jsxs)(a.Fragment,{children:[e.stock," Itens em stock"]}):1===e.stock?(0,a.jsxs)(a.Fragment,{children:[e.stock," Ttem em stock"]}):(0,a.jsx)(a.Fragment,{children:"Sem itens em stock"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsx)("div",{onClick:()=>n(e.id),className:"viewModeSelector bg-[rgb(var(--background))] p-2 w-max h-max rounded-[10px] border-solid border-[1px] transition-color duration-300 cursor-pointer",children:(0,a.jsx)(f.Z,{size:15,strokeWidth:1.2})}),(0,a.jsx)("button",{onClick:()=>s(e.id),className:"viewModeSelector bg-red-100 text-red-600 border-red-400 p-2 w-max h-max rounded-[10px] border-solid border-[1px] transition-color duration-300 cursor-pointer",children:(0,a.jsx)(g.Z,{size:15,strokeWidth:1.2})})]})]},e.id))})}var S=t(4129),E=t(2164),Z=t(5290);function z(e){let{opened:r,closeModal:t,selectedProduct:o,setSelectedProduct:s}=e,{errorsProduct:c,handleSubmitProduct:n,registerProduct:d,updateProduct:l,isLoading:u}=b(),m=(0,i.useRef)(null),p=e=>{m.current&&!m.current.contains(e.target)&&t(!1)},x=e=>{let{id:r,value:t}=e.target;s(e=>({...e,[r]:t}))};return(0,i.useEffect)(()=>(r?document.addEventListener("mousedown",p):document.removeEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}),[r]),(0,a.jsxs)("div",{ref:m,"data-opened":r,className:"modal w-[350px] h-full gap-4 absolute top-0 right-[-350px] bg-[rgb(var(--background))] transition-all duration-300 z-10 border-l-[1px] border-l-solid",children:[(0,a.jsx)("div",{className:"flex px-4 mt-4",children:(0,a.jsxs)("h1",{className:"text-[#333] text-[1.3rem] font-semibold flex gap-2 items-center justify-center",children:["Atualizar produto ",(0,a.jsx)(Z.Z,{size:25,strokeWidth:1.9})]})}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l(o.id,o)},className:"px-4 mt-8 flex flex-col gap-3 w-full",children:[(0,a.jsx)(w.Z,{value:o.name,onChange:x,label:"Nome",id:"name",placeholder:"Tv 32' FHD+"}),(0,a.jsx)(w.Z,{value:o.description,onChange:x,label:"Descri\xe7\xe3o",id:"description",placeholder:"Observe o mundo de outro \xe2ngulo"}),(0,a.jsx)(w.Z,{value:o.price,onChange:x,label:"Pre\xe7o",id:"price",type:"number",placeholder:"R$ 2.900,00"}),(0,a.jsx)(w.Z,{value:o.stock,onChange:x,label:"Stock",id:"stock",type:"number",placeholder:"24"}),(0,a.jsx)(k.Z,{isLoading:u,children:"Atualizar"})]})]})}function P(){let{viewMode:e,setViewMode:r,data:t}=l(),{selectedProduct:o,setSelectedProduct:s,setIsModalOpened:c,isModalOpened:n,updateModalOpened:d,setUpdateModalOpened:i}=b();return(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"w-full h-max flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-[#333] text-[1.3rem] font-semibold",children:"Produtos"}),(0,a.jsx)("p",{className:"text-[0.75rem] opacity-70",children:"Gerencie os seus produtos"})]}),(0,a.jsx)("button",{onClick:()=>c(!0),className:"text-[rgb(var(--background))] bg-[#0066a1] p-3 rounded-[12px] hover:bg-[#236185] transition-color duration-300",children:(0,a.jsx)(j.Z,{size:17,strokeWidth:1.5})})]}),(0,a.jsx)("div",{className:"w-full h-[1px] bg-[var(--primary)] opacity-5 mt-3"}),(0,a.jsxs)("div",{className:"w-full h-max flex items-center justify-between mt-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsxs)("p",{className:"opacity-70 text-[0.75rem]",children:["Produtos: ",(0,a.jsx)("span",{className:"p-2.5 bg-slate-200 text-slate-600 font-medium border-[1px] border-solid border-slate-300 rounded-[10px]",children:null==t?void 0:t.data.products.length})]}),"                "]}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)("div",{onClick:()=>r(1),"data-selected":1===e,className:"viewModeSelector bg-[rgb(var(--background))] p-2.5 w-max h-max rounded-[10px] border-solid border-[1px] transition-color duration-300 cursor-pointer",children:(0,a.jsx)(S.Z,{size:18,strokeWidth:1.2})}),(0,a.jsx)("div",{onClick:()=>r(2),"data-selected":2===e,className:"viewModeSelector bg-[rgb(var(--background))] p-2.5 w-max h-max rounded-[10px] border-solid border-[1px] transition-color duration-300 cursor-pointer",children:(0,a.jsx)(E.Z,{size:18,strokeWidth:1.2})})]})]}),1===e&&(0,a.jsx)(v,{setSelectedProduct:s,setUpdateModalOpened:i}),2===e&&(0,a.jsx)(N,{setSelectedProduct:s,setUpdateModalOpened:i}),(0,a.jsx)(z,{setSelectedProduct:s,selectedProduct:o,opened:d,closeModal:i}),(0,a.jsx)(y,{opened:n,closeModal:c})]})}},1189:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var o=t(7437),s=t(7485);function a(e){let{children:r,isLoading:t,...a}=e;return(0,o.jsx)("button",{disabled:t,className:"bg-[var(--primary)] mt-2 rounded-lg w-full h-[42px] flex items-center justify-center text-[0.8rem] text-[rgb(var(--background))]",children:t?(0,o.jsx)(s.gy,{color:"rgb(var(--background))",width:18}):r})}},3948:function(e,r,t){"use strict";var o=t(7437);let s=(0,t(2265).forwardRef)((e,r)=>{let{id:t,label:s,haveError:a,...c}=e;return(0,o.jsxs)("div",{className:"inputField w-full sm:w-[300px] bg-transparent",children:[(0,o.jsx)("label",{htmlFor:t,className:"text-[rgb(var(--foreground))] text-[0.8rem] font-medium","data-haveerror":a,children:s}),(0,o.jsx)("input",{id:t,ref:r,...c,className:"w-full px-3 py-2.5 rounded-lg bg-[var(--background-secondary)] border-[1px] border-solid outline-none text-[0.8rem] ".concat(a?"border-red-500":"border-gray-300"),"data-haveerror":a})]})});s.displayName="InputField",r.Z=s}},function(e){e.O(0,[571,998,183,776,374,336,350,971,23,744],function(){return e(e.s=4292)}),_N_E=e.O()}]);